"use strict";var t=require("react"),e=require("mutation-tracker"),r=require("lodash-es");function i(t,e,r,i){return new(r||(r=Promise))((function(u,n){function a(t){try{s(i.next(t))}catch(t){n(t)}}function o(t){try{s(i.throw(t))}catch(t){n(t)}}function s(t){var e;t.done?u(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,o)}s((i=i.apply(t,e||[])).next())}))}function u(r,i){const u=t.useRef(e.MutationTracker(r,{defaultValue:!1,initialMutation:{mutatedAttributes:null==i?void 0:i.initiallyTouched,mutatedValue:!0}})),n=t.useRef(e.MutationTracker(r,{defaultValue:!1,initialMutation:{mutatedAttributes:null==i?void 0:i.initiallyDirty,mutatedValue:!0}}));return{errorStateTracker:t.useRef(e.MutationTracker(r,{defaultValue:[]})).current,touchedStateTracker:u.current,dirtyStateTracker:n.current}}function n(t,e){const i=[];return function t(e,u="",n="."){for(const a in e)if(e.hasOwnProperty(a)){const o=u?`${u}.${a}`:a;r.isObject(e[a])&&null!==e[a]?t(e[a],o,n):i.push({key:o,value:e[a]})}}(t,"",e),i}function a(e,i){const[a,o]=t.useState([]),{touchedStateTracker:s,dirtyStateTracker:l,errorStateTracker:c}=u(e,i),[,d]=t.useState(0);function f(){d((t=>t+1))}return{errorFlatList:a,errors:c.state,touched:s.state,dirty:l.state,getFieldState:function(t,e,r){var i=c.getMutatedByAttributeName(t);return{name:t,currentValue:e,previousValue:r,touched:s.getMutatedByAttributeName(t),dirty:l.getMutatedByAttributeName(t),isValid:!!i.length,errors:i}},getFieldTouched:function(t){return s.getMutatedByAttributeName(t)},setFieldTouched:function(t,e){s.setMutatedByAttributeName(t,e),f()},setFieldsTouched:function(t,e){s.setMutatedByAttributeNames(t,e),f()},setTouchedAll:function(t){s.setAll(t),f()},getFieldDirty:function(t){return l.getMutatedByAttributeName(t)},setFieldDirty:function(t,e){l.setMutatedByAttributeName(t,e),f()},setFieldsDirty:function(t,e){l.setMutatedByAttributeNames(t,e),f()},setDirtyAll:function(t){l.setAll(t),f()},getFieldValid:function(t){var e;return(null!==(e=c.getMutatedByAttributeName(t).length)&&void 0!==e?e:0)<=0},getFieldErrors:function(t){var e=c.getMutatedByAttributeName(t);return r.map(e,(t=>t))},setErrorsAll:function(t){o(t),c.clear();var e=Object.groupBy(t,(({key:t})=>t));r.forEach(e,((t,e)=>{var r=(null==t?void 0:t.map((t=>t.message)))||[];c.setMutatedByAttributeName(r,e)}))},isFormDirty:function(){return r.some(n(l.state,"."),(t=>t.value))},isFormValid:function(){return!a.length}}}"function"==typeof SuppressedError&&SuppressedError;var o=Object.freeze({__proto__:null,useFormValidation:function(e,r,u){const[n,o]=t.useState(!1),{errorFlatList:s,errors:l,touched:c,dirty:d,getFieldTouched:f,setFieldTouched:y,setFieldsTouched:F,setTouchedAll:h,getFieldDirty:m,setFieldDirty:g,setFieldsDirty:A,setDirtyAll:b,getFieldValid:p,getFieldErrors:T,setErrorsAll:v,getFieldState:M,isFormDirty:D,isFormValid:S}=a(r,u);function V(){var t=!1;return(()=>{i(this,void 0,void 0,(function*(){return yield k().then((e=>t=e)).catch((()=>t=!1))}))})(),t}function k(){return e.validate(r).then((t=>(v(t),S())))}return t.useEffect((()=>{V()}),[]),{errorFlatList:s,errors:l,touched:c,dirty:d,isSubmitting:n,isFormDirty:D,isFormValid:S,validateAsync:k,validate:V,setIsSubmitting:function(t){o(t)},getFieldState:M,getFieldTouched:f,setFieldTouched:y,setFieldsTouched:F,setTouchedAll:h,getFieldDirty:m,setFieldDirty:g,setFieldsDirty:A,setDirtyAll:b,getFieldValid:p,getFieldErrors:T}}});exports.flattenObject=function(t,e){return function t(e,i="",u="."){const n={};for(const a in e)if(e.hasOwnProperty(a)){const o=i?i+u+a:a;r.isObject(e[a])&&null!==e[a]?Object.assign(n,t(e[a],o,u)):n[o]=e[a]}return n}(t,"",e)},exports.flattenObjectToArray=n,exports.getDeep=function(t,r){return e.getAttributeMutation(t,r)},exports.setDeep=function(t,r,i){return e.setAttributeMutated(t,r,i)},exports.useFormFieldState=a,exports.useMabel=o,exports.useStateTrackers=u;
//# sourceMappingURL=index.js.map
